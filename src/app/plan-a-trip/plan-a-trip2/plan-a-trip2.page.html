<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="primary">
      <ion-button (click)="onSaveItenrary()" shape="round">
        Save
      </ion-button>
    </ion-buttons>
    <ion-title>Plan Your Trip</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="form">
    <ion-grid class="ion-margin-top">
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-list>
            <ion-item>
              <ion-label position="stacked">Title</ion-label>
              <ion-input formControlName="title"></ion-input>
            </ion-item>
            <ion-item>
                <ion-label position="stacked">Description</ion-label>
                <ion-textarea formControlName="desc"></ion-textarea>
              </ion-item>
            <ion-item>
              <ion-label position="floating">Departure date</ion-label>
              <ion-datetime
                display-format="MMM DD, YYYY"
                picker-format="MMM DD, YYYY"
                formControlName="departure_date"
              ></ion-datetime>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Arrival date</ion-label>
              <ion-datetime
                display-format="MMM DD, YYYY"
                picker-format="MMM DD, YYYY"
                formControlName="arrival_date"
              ></ion-datetime>
            </ion-item>
            <ion-item>
              <ion-label position="floating">Destination</ion-label>
              <ion-select formControlName="dest">
                <ion-select-option *ngFor="let destination of dests">{{
                  destination
                }}</ion-select-option>
              </ion-select>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
  <ion-list
    *ngFor="let stop of stops; let i = index"
    class="accordion-list"
    lines="none"
    details="false"
    no-padding
  >
    <div *ngIf="stop_added">
      <ion-item
        tappable
        (click)="toggleSection(i)"
        [ngClass]="{ 'section-active': stop.open, section: !stop.open }"
      >
        <ion-icon
          slot="start"
          name="arrow-forward"
          *ngIf="!stop.open"
        ></ion-icon>
        <ion-icon slot="start" name="arrow-down" *ngIf="stop.open"></ion-icon>
        <ion-icon
          (click)="onDelete(i)"
          slot="end"
          color="danger"
          name="close"
        ></ion-icon>
        <ion-label>{{ stop.dest }}</ion-label>
      </ion-item>

      <ion-item
        *ngIf="stop.open"
        color="primary"
        style="border-bottom: 1px solid white;"
      >
        <ion-label>Details: </ion-label>
        <ion-button color="success" expand="block" (click)="onAddDetails(i)"
          ><ion-icon name="add" slot="start"></ion-icon>Update</ion-button
        >
      </ion-item>
      <ion-item
        *ngIf="stop.open"
        color="primary"
        style="border-bottom: 1px solid white;"
      >
        <ion-label>Accomodation: </ion-label>
        <ion-button
          color="success"
          expand="block"
          (click)="onAddAccomodation(i)"
          ><ion-icon name="add" slot="start"></ion-icon>Update</ion-button
        >
      </ion-item>
      <ion-item
        *ngIf="stop.open"
        color="primary"
        style="border-bottom: 1px solid white;"
      >
        <ion-label>Transport: </ion-label>
        <ion-button color="success" expand="block" (click)="onAddTransport(i)"
          ><ion-icon name="add" slot="start"></ion-icon>Update</ion-button
        >
      </ion-item>
      <ion-item
        *ngIf="stop.open"
        color="primary"
        style="border-bottom: 1px solid white;"
      >
        <ion-label>Activities: </ion-label>
        <ion-button color="success" expand="block" (click)="onAddActivities(i)"
          ><ion-icon name="add" slot="start"></ion-icon>Update</ion-button
        >
      </ion-item>
    </div>
  </ion-list>
  <ion-grid>
    <ion-row>
      <ion-col *ngIf="stop_added" class="ion-text-end">
        <ion-button (click)="onAddStop()" fill="outline" padding
          ><ion-icon name="add" slot="start"></ion-icon>Add stop</ion-button
        >
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-grid *ngIf="!stop_added">
    <ion-row>
      <ion-col size-sm="6" offset-sm="3">
        <form (submit)="onSubmit()">
          <ion-list>
            <ion-item>
              <ion-label position="floating">Stop Destination</ion-label>

              <ion-icon
                slot="end"
                (click)="onSubmit()"
                *ngIf="stop_destination!=''"
                name="checkmark"
              ></ion-icon>

              <ion-input
                [(ngModel)]="stop_destination"
                required
                name="stop_destination"
                
              ></ion-input>
            </ion-item>
          </ion-list>
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
